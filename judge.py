import subprocess
import time
import sys
import os
from subprocess import Popen, PIPE

discriminants = ['-0xaf0806241ecbc630fbbfd0c9d61c257c40a185e8cab313041cf029d6f070d58ecbc6c906df53ecf0dd4497b0753ccdbce2ebd9c80ae0032acce89096af642dd8c008403dd989ee5c1262545004fdcd7acf47908b983bc5fed17889030f0138e10787a8493e95ca86649ae8208e4a70c05772e25f9ac901a399529de12910a7a2c3376292be9dba600fd89910aeccc14432b6e45c0456f41c177bb736915cad3332a74e25b3993f3e44728dc2bd13180132c5fb88f0490aeb96b2afca655c13dd9ab8874035e26dab16b6aad2d584a2d35ae0eaf00df4e94ab39fe8a3d5837dcab204c46d7a7b97b0c702d8be98c50e1bf8b649b5b6194fc3bae6180d2dd24d9f',
'-0xd58a9b7f4878f6c08e0bd2e9753b6522dda51977f1473e410230625be937370e4d32cded21d313c6964b889a02529a0d75b521e3327812a86f847f3aeea4a5d0179c9289846f6fcdad09bc8e19f06ccc621fe49fe2fdd8e9f756b09a0c4c51996f2322671a4ebaf2f139a18c603e5e3dd82cb2a138d77b58b3ee0a9f7d30c8c3b12bbf999d3387f10f1f0e1aaff195ea0e285b2287422e2293c687285ae00464e652da00473ef1460480823e5e22250046ad3c2388bd248ff736152e1a5567d4a6eebe81b3fd02f100e76f279b7ebef79ae535172608575e4a142d56ed6b74a89e417ddeacb1c24557578bcca40260b1d54f87d074bf100a9372c18904739af7',
'-0xe91e65b381f9df578fc31cf13f1ddd4800882b86b5ed34f8959350b70e0e89d018a75036737a1418e98eee2ff4ba1ff584e3cd6e3d7008f77d3e636b4295fa5e3ee1e0e9b75f9020ce282527c45a8aae0d959664bcb6205a6d9a3a6ed93347aaad3d517493aefd65715c1bb05b5b4bb902607d5b808575e251fa06e34c0abdfc017b82ce5faac445271eec71c8e0774f502b142eba2d03aa833cae8824bbf8072d13b6235414a30e5a4599a51f8729c352e1b99ac858380b3c1816473fa4fe1e92926298d2e2f794bb824fd944fc212bf94d64446760c2bd509e36aa7b2fdfc28d0c83ba53cb2c11f48f8c19010964f8f9ed5f3c51e490b03cbcb4e357eb108f',
'-0x8a9cb0711e15088b305b599357285cd9b8ffae50102c893435cf693e2f5ec053b7d7e69c7cb8b1136d037af63e9277d104861228168a135e87649673a99f1d0165719cb4d82b63cabd888df0361a950f59d89b55f3d2c2635aa7094f984e72f0b8ab87edc51618625df58f35ab08cf961d4850c0ee053204e22684f8413a1accad06f8c4351958b1bc9131e62219f295f310c1720acf9cb5b6b8d78c9c4f911cee196ca3b13a000ba9ab6d0c1340b660e12640c962569dff3dae124f63d589379b3f4c3efe0f5bbd87166e079754fa75de92af0e7b9c910f821dd8ac9d4de6b679b202c220d877a5b34cd51df908cf537e8185d96e2cd147e973300eac62cda7',
'-0x9ea822d487595fb1ee8a7c97794dcd9310f4736304091d6f71538f02b44789e06b410ac2a049e2bc8a7a51858a5c2f474478e02792e1260194c21ba77d33a869175ada3364edaa3964a5e83e4b30f576042c38ad2905df79f07eafce3925b9fba8af82b5ecbdd7007c42e55b51c86b7c1f3253d3e10a035bfe05fcd4bb2be95a8c82f3c5c90943bcd89b043b7539b22888e524f20d8d88a5796d5e0d99454dfe218f15ee209d639eee8309bd39c71b2cf790295b6d4c6debbbb4f84e883f049d6c5b89a5c2071ac239941ba7777c776f9c7d1cec0bcd5f6171f10e426a45f58a706a8cb9da028e6cd9642f0e25c73c9f49acc6f6b2c04cb580cfa23917eb194f',
'-0xcce03d4e076a6ea47396904c578b038deefe473681830d791fea13b107f3ab6fed3cee169f9307d461816cb253e094c80fe8881b24d91ec7389ab989adce28f74195ec8746e522038f0f10cd4d480a21f10083aae6eee3a886dd35843a23a7598dd6473edc3db2231332f38ed639a40b82b6f0673fbdaf237054645340835b022548cc966b982d1339ad265caa8c50c1443e57c6dce79e4e00da66cbdcb5b85298277028a19e8a598ae3384f88d71c80ea14d9b8106b429a92d9debc23bb7fb7e5e4b73b074549b05ee63f2328de1782e1bd836fcea347a3c7180682bbd7a8c1b3827b96324fcc5666496e3ac8a27d735569fb34ca8fc4cb62147aa92d729fbf',
'-0xa1bfe86246b1c71bd293c9fed00816312cb1624ca9cc62b318631edf789bf46e58f081302cd11f76517f0b989d8173201cf81bb380129dbcbf86fe7f50a12e7afbdb2334a9bd1d686dacbf60a2b01db5001d6ec4f9317bc8d94ba648b8f42b9dd37a41ae84cc8302cfde2a979fb5bff7514137c4841a58fd33b5d017dc92ba8053ee77ce3b3c1e5bdd9367c89589c12644da04dfb75f464c0fc5c34e67ee6199a0f25450544fb8a509d98ee4bd75881f64b32a8bb41d96ca7b4ce07454a6c206b6ca3115c9b008d07a97b97f4354c0015ed89a51d579c36287c9de3d60a4b141d0002675038e172b20dd05ed4e21d3675d0e1d7fec6be6368710828ac8bc862f',
'-0xaba1b5ed3c97df610586bb9ba72dec9f1fe644a6d6a93f10b8927742ab0134ab1db30814170454a951f79041d78c7f29b5f2f01693f33060fa05f1deae0cfd67c21872dbba19ee3ac122c527a3c57df8d3cd6e7ada17958e5bf7da5dd7d4f1f33b816bd71bdbc7a36e433f9d11d61ed6dc379e33699a09ce07696b6d4728e50f55f8faa11706cec8481351c759b1ba5a78d7b0af42fe8de1e870cb1a2016e1c7a01e0373abe97c1393cb8ca90a66bd804530ce8cff4b9a9f0ee8d1abcc30ded6904eb800feb99dc517cd62275410acfd48f46e467d9055da582adde1b32f526cf0ca5a73e863618821c9bff5a9eb743eeab5e36f589aec40caca4130c915fd67',
'-0xbec9c2e7bc5edf1aef9cfd6affa51875c9d6a2219efcb96626900f363103993fe8c8ce7aea12e264c0b2c0701aedf6f41535cfccc70f97fc18aa887d3e03e7014ec00abd8f1246307097a7c7c44b157f3684048ac240b581c1afddb2fc686091d6f0d974cd09934b856dfc719a0da4bbfb678f2ce9fb94c7de68d02beb710a93e95099d40dbd01a0161ca0080b41e1c1a48e24ab3e1c480cc65b414c9afb21bb1299f8498f3fc60413663d55206337fc85b11ee8ad43c7f194d1a3af0787f8ea5436d5b562ceaf0ad68454c724bdc6ba259c5511bc2931ef80ee202d7faa82beb283c8693d1b568b20efcacb918361850c38caffab3f82556ea8ab32282edc57',
'-0xba783185c96763bbaed6a84b064de277b30bbfe8cd123afcd1d758935c86bf5df853ab596d711c38e43cf95830bef954f0aaf6caffcf1ac7c0821cf24beb78bda6a716f06c15c56997be74a0bb2e021ccf19ba8918b268937ee8a7e9fa0baab6d5877639388bacf9b434db08fd9e88c4dc92eab510755a465163f489c8e7d9bfb03108a3614db2ee77cd166bb636c129081925c4a1c1239ed42bf1218d69de11086e1e4302fe69fbd5cc2ad0db103a372fdb2f5051d1b9e2af4f464ed06ad24c4266a7f54c981deca11462de3cec4b0334bdd56375a6f16e65965ab4375521a217ebf3b7719b42028ea14eb2cec77141c9979da02ec176209adc297ecbc6da7f']

results = [b'40588402163906253482368889519853994652749463867704280880817861618843906514479394353185426543229127085740896478836295760352154738946495111228464712903306216483312743302865073936934625736105583030543354392586509673984456117031219431664233368894677088599881720387019636755449707883353121221227678816099101338691\n-33230155255417155363283421664124388237782523285687473204958251134020818050153123355557398323080868340180500761556196240074587884107552517123911737527779315080174401349914263452376175288361006792378726544123483707320102201410079633857204630912003531487225200469654084220982425147699047093657807167999111809449',
b'47372518692253281228488143707506919874956631289355374985092755071926551826447066769305509485932780550499610564147982161122071952243591845825325872612642471437143956545850220126598941257990191795147819684525325421371467187781311057024098561447139422127610744122460481621116561722761353834567447100991555938596\n24839846316728982405955360635149902275236897426093604725978410755069880100380048665418373040412716514569320575527539379593954707915754465797905580890971065716924294041591988330096997561989410473926489441593034839492045084102824600537091179065312167019733274679701208619714646021444282016622184170962017967181',
b'32634477332359070188538100789178479667821612539970110251820942375155673647490850686605714872100166157361024175115765198014455324948040141555458331905244908175125423297319353992679095540007856205178167421617121140893709203203579932729978355695439660542739435475715235659326986892018091616310918103907523345785\n-22550721364940333244066448567158624489930285750584131135559830982481121369309224229040685799042542311769438835377995436860605166526072289746001985214356731754774144010847036445458496125669592525166916274787278750077576961307700276447405574087466459257161957281206342516873891682071109770153260677291394993893',
b'706197699786084739584847721453499684753194537875766819536459339851566830189199866963934074783491787710226662541274657886849850618735287056388333247255591915525473501277010110525236065256132910744966094290964595835834377787787362941409065136988582369031162043090931470436953641686146238385723564012350444964\n532656859142449024387689808485973172869308910692759012534725465122920476165680679060615867689429378237305291883132749307494757894538620691044789783104700205873387963976570388818386008052674760406741255841216456715518776244204648622154299485141090401344477966838987924453969157863291434832463433271442509715',
b'35115408715647129532230352352585661870501107202794773599333356079380749175134868913524446476346317546090026088160086456118640453612301497304834500067495579240106812815085095408631451205083365570196196609352799331132127273130803472423232594216237836987061064944033165231094350208188785604270299798760207260893\n-5161115045285839912753213915659142689840326086053084695319834861797596886177439593200157938384382612846615642088873998414960459977781342473112671844787294847629891924706842192584201558207868283890224256821045234710190079543971290071670808526763939739381729466491460695988864311072325730200571189819343187983',
b'76271078065882295661778298282215220948164843255850860677546369273882026109058609678466988414840445400778298593841950142906953417072124810175062138451074352702706220273410249147104742036109497492597309990494607384352152098797235597001964878470226746629976540522634839760330495575533653866686655101858699743671\n65512383608709369763341756473207940467170388442070332738888077876518979918857774647164401106426196869965727075141243348558148637204912788947479032945603694997822805336768750730122368193391020968154243546017630287828456461050674599290049898868594695802204901782118489302174572752308060112365754127049932433705',
b'60715701669111857523521706251027778896831846170317868415442596383503791620286271056669831579083732931952707034746706771926867499484883765604182553981322157431810362018930793651173399124512446809631597381495967332648121890106367902895666980427766978849224162611885455482011159219689647283559377168417502629642\n-14050165624899974163692209562268630448337495166133947018336119692395842649077092521914564939006053586843326740555065006957473288954490424854616922791438360964544161674645110452709995692177667895406325016796403192653664920067094963334186409250796513511853293771715679676388564306327512573679577677941064102951',
b'49574082073621907766184344572143252414987232887242122153560516098651793709468200097547344264250405310428854580253453544650283983749027520934597153581234478120438502500784135333547112356523121918076044800284395291867561177104041698795834988270353192986295772789291801118363560350367665515124842801646511972998\n-9624285401124668597411659306077985446430461308421096104594685145049310587998740616897422889720517408182887321435764738262188674335232565200428561904371037293615189489309981467335551348084255398734798451519230129509325140282090102161553679162783012193448377609227300788307412262799255364742501272165896239875',
b'65040583463198003014928005480040123408131606024725642754686408871581996153568352550774813756562170220984693330822205273107519506080291950718581531339602106242230978779352232279769443052628974975849849395538142986765261869773365763056795896827042180886111659518547467004314085369585829976849018921498366149866\n-13636736482698630318593424529544570047043564833743844611343994980182802288259758413109224299327723708815039336070766744739703072573216095990971995104637184056875841766475060147151933272456882571166822363708805962472109213876498815731388170839646922709882787970476976878578530323283978236893987464354431639321',
b'44554734260641273676302260155088008432653830144485949621940994319702036155305195733121508839337424054534913690086972644572430008485842235612171597905528928736753840610852099011414520238654010536431819188532882372941956512549380400798637051260045335920689520134877514206109418939274173232184477571618042465102\n12480859450772011103748348697366794854896611436108790132159619575639811774680882821138345206896355821596131376224667239090068854764402697577993798883418126330016003408793913938038503042668922726203110473508504567371406446629145023952480755111827972304129374979293570414961175165033259530736380285502565612969']

if __name__ == '__main__':
    os.chdir(sys.argv[1])
    subprocess.call(['./install.sh'])
    wrong_answers = 0
    total_time = 0
    for discriminant, result in zip(discriminants, results):
        print("Discriminant:")
        print(discriminant)
        start = time.time()
        cmd = './run.sh ' + discriminant + ' ' + str(2097152)
        try:
            pro = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr = subprocess.PIPE, shell=True)
            out_script, err = pro.communicate()
        except subprocess.CalledProcessError as e:
            print(e.output.decode())
        end = time.time()
        if (err):
            print("Runtime erors: ", err)
        print("Total time: " + str(end - start))
        total_time += (end - start)
        out_script_clean = out_script.decode()
        expected_result_clean = result.decode()
        out_script_clean = out_script_clean.replace(" ", "")
        out_script_clean = out_script_clean.replace("\n", "")
        expected_result_clean = expected_result_clean.replace(" ", "")
        expected_result_clean = expected_result_clean.replace("\n", "") 
        if (out_script_clean == expected_result_clean):
            print("Correct answer!")
        else:
            print("Wrong answer!")
            print("Expected: ", expected_result_clean)
            print("Contestant output: ", out_script_clean)
            wrong_answers += 1

    print("Wrong answers: ", wrong_answers)
    print("Total time: ", total_time)
